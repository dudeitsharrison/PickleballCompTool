<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2034792889395341"
    crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pickle Pairs | Doing Doubles Right</title>
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Pickle Pairs - The Pickleball Matchmaker | Doing Doubles Right">
    <meta property="og:description" content="Pairing picklers for unique matches every round. ü•í">
    <meta property="og:image" content="smallicon.png">
    <meta property="og:url" content="">
    <meta property="og:type" content="website">
    
    <!-- AdSense Verification - Replace content with your actual AdSense publisher ID when provided -->
    <meta name="google-adsense-account" content="ca-pub-XXXXXXXXXXXXXXXX">
    
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" />
    <style>
        /* Logo Flip Animation Styles */
        .logo-flip-container {
            perspective: 1000px;
            width: 200px;
            height: 200px;
            margin: 0 auto;
            cursor: pointer;
        }
        
        .logo-flipper {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.8s;
            transform-style: preserve-3d;
        }
        
        .logo-flip-container:hover .logo-flipper {
            transform: rotateY(180deg);
        }
        
        .logo-front, .logo-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .logo-back {
            transform: rotateY(180deg);
        }
        
        .back-logo {
            transform: scale(1.2); /* Zoomed in slightly */
        }
        
        /* Header logo specific styles */
        .header-logo-flip {
            width: 100px;
            height: 100px;
        }
        
        .header-logo-flip .logo-flipper {
            transition: transform 0.6s; /* Slightly faster in header */
        }
        
        #header-logo, #header-logo-back {
            width: 100%;
            height: auto;
            object-fit: contain;
        }
        
        /* Mobile specific styles */
        @media (max-width: 768px) {
            .logo-flip-container:active .logo-flipper {
                transform: rotateY(180deg);
            }
        }
        
        /* Intro info styles */
        .intro-info-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px auto;
            max-width: 80%;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s ease, transform 0.5s ease;
        }
        
        .intro-content.animate-in .intro-info-container {
            opacity: 1;
            transform: translateY(0);
            transition-delay: 0.6s; /* Appear after slogan */
        }
        
        .intro-info-logo {
            height: 40px;
            width: auto;
            margin-right: 15px;
        }
        
        .intro-info-text {
            font-size: 16px;
            color: #555;
            text-align: left;
            line-height: 1.4;
        }
        
        /* Mobile adjustments for info text */
        @media (max-width: 768px) {
            .intro-info-container {
                flex-direction: column;
                text-align: center;
            }
            
            .intro-info-logo {
                margin-right: 0;
                margin-bottom: 10px;
            }
            
            .intro-info-text {
                text-align: center;
            }
        }
        
        /* Fix for debug button positioning */
        .toggle-debug-btn {
            position: fixed;
            left: 10px;
            bottom: 10px;
            /* Ensure it stays on top of other content */
            z-index: 999;
        }
        
        /* Info Button Styles */
        .toggle-info-btn {
            position: fixed;
            left: 10px;
            bottom: 110px; /* Position above the other buttons */
            z-index: 999;
            border-radius: 50%; /* Make button circular */
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: rgb(68, 155, 255);
            border: none;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            color: #f7f7f7;
        }
        
        .toggle-info-btn:hover {
            background-color: #7ec5ff;
        }
        
        /* Settings Panel Styles */
        .settings-panel {
            position: fixed;
            bottom: 50px;
            left: 10px;
            width: 300px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            padding: 15px;
            z-index: 998;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        /* Help Panel Styles */
        .help-panel {
            position: fixed;
            top: 0;
            right: 0;
            width: 450px; /* Wider by default */
            height: 100vh;
            background-color: white;
            box-shadow: -2px 0 10px rgba(0, 0, 0, 0.2);
            padding: 20px;
            z-index: 1000;
            overflow-y: auto;
            transform: translateX(100%);
            transition: transform 0.3s ease-in-out;
        }
        
        /* For wider screens, make the help panel wider */
        @media (min-width: 1200px) {
            .help-panel {
                width: 520px; /* Wider panel for larger screens */
            }
        }
        
        /* For ultra-wide screens, increase panel width further */
        @media (min-width: 1800px) {
            .help-panel {
                width: 600px; /* Even wider for ultra-wide screens */
            }
        }
        
        .help-panel.active {
            transform: translateX(0);
        }
        
        .help-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .help-header-title {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .help-header-title h2 {
            margin: 0;
            color: #333;
        }
        
        .help-logo {
            width: 40px;
            height: 40px;
        }
        
        .help-section {
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .help-section h3 {
            color: #4CAF50;
            margin-top: 0;
            font-size: 18px;
        }
        
        .help-section p {
            color: #555;
            line-height: 1.5;
            margin-bottom: 12px;
        }
        
        .help-feature {
            margin-bottom: 15px;
            padding-left: 10px;
            border-left: 3px solid #4CAF50;
        }
        
        .help-feature h4 {
            margin: 0 0 5px 0;
            color: #333;
        }
        
        .help-feature p {
            margin: 0;
            font-size: 14px;
        }
        
        .pickle-highlight {
            color: #4CAF50;
            font-weight: bold;
        }
        
        .help-close-btn {
            background: none;
            border: none;
            color: #999;
            cursor: pointer;
            font-size: 24px;
        }
        
        .help-close-btn:hover {
            color: #333;
        }
        
        .leaderboard-explanation {
            background-color: #f9f9f9;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 15px;
        }
        
        .leaderboard-explanation h4 {
            margin-top: 0;
            color: #4CAF50;
        }
        
        .metric-description {
            display: flex;
            margin-bottom: 8px;
        }
        
        .metric-name {
            font-weight: bold;
            min-width: 130px;
        }
        
        .help-footer {
            text-align: center;
            margin-top: 30px;
            color: #999;
            font-size: 12px;
        }
        
        /* Mobile adjustments for help panel */
        @media (max-width: 768px) {
            .help-panel {
                width: 85vw;
            }
        }
        
        .settings-header {
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .settings-header h3 {
            margin: 0;
            color: #333;
            font-size: 18px;
        }
        
        .settings-toggles {
            margin-bottom: 20px;
        }
        
        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        /* Setting label font color update */
        .setting-label {
            font-size: 14px;
            color: white;
        }
        
        /* Toggle Switch Styles */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }
        
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .toggle-slider {
            background-color: #4CAF50;
        }
        
        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }
        
        /* Debug Section Styles */
        .debug-section {
            border-top: 1px solid #eee;
            padding-top: 15px;
        }
        
        .debug-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .debug-header h4 {
            margin: 0;
            color: #555;
            font-size: 14px;
        }
        
        #debugArea {
            width: 100%;
            height: 150px;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 8px;
            font-family: monospace;
            font-size: 12px;
            resize: vertical;
        }
        
        /* Tooltip for muted controls */
        [data-tooltip] {
            position: relative;
        }
        
        [data-tooltip]:hover:after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 12px;
            white-space: nowrap;
            z-index: 1000;
        }
        
        /* Toast Notification Styles */
        .toast-container {
            position: fixed;
            top: 60px; /* Increased from 20px to move toasts down */
            right: 20px;
            z-index: 9999; /* Increased z-index to be above everything else */
        }
        
        .toast {
            min-width: 250px;
            margin-bottom: 10px;
            padding: 12px 20px;
            border-radius: 4px;
            color: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            font-size: 14px;
            opacity: 0;
            transform: translateX(50px);
            transition: all 0.3s ease;
        }
        
        .toast.show {
            opacity: 1;
            transform: translateX(0);
        }
        
        .toast-info {
            background-color: #2196F3;
        }
        
        .toast-success {
            background-color: #4CAF50;
        }
        
        .toast-warning {
            background-color: #FF9800;
        }
        
        .toast-error {
            background-color: #F44336;
        }
        
        /* Ranking modes carousel styles */
        .ranking-carousel {
            background-color: #f9f9f9;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            position: relative;
        }
        
        .ranking-slide {
            display: none;
            animation: fadeEffect 0.5s;
        }
        
        .ranking-slide.active {
            display: block;
        }
        
        @keyframes fadeEffect {
            from {opacity: 0.7;}
            to {opacity: 1;}
        }
        
        .ranking-title {
            color: #4CAF50;
            margin-top: 0;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .ranking-description {
            margin-bottom: 12px;
            line-height: 1.4;
        }
        
        .ranking-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
        }
        
        .ranking-dots {
            display: flex;
            gap: 5px;
            justify-content: center;
        }
        
        .ranking-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: #ccc;
            cursor: pointer;
        }
        
        .ranking-dot.active {
            background-color: #4CAF50;
        }
        
        .ranking-btn {
            background: none;
            border: none;
            color: #4CAF50;
            cursor: pointer;
            padding: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .ranking-btn:hover {
            color: #45a049;
        }
        
        .ranking-btn:disabled {
            color: #ccc;
            cursor: default;
        }
        
        .ranking-slide ul {
            padding-left: 20px;
            margin-bottom: 0;
        }
        
        .ranking-slide li {
            margin-bottom: 5px;
        }
        
        /* Feature visual example styles */
        .feature-visual {
            background-color: #f5f5f5;
            border-radius: 8px;
            padding: 8px;
            margin: 8px 0;
            border: 1px solid #e0e0e0;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* Dancing pickle guide styles */
        .dancing-pickle-guide {
            position: fixed;
            top: 80px;
            right: 40px;
            z-index: 1005;
            animation: bounceAndSpin 2.5s infinite;
            cursor: pointer;
            width:50px;
            height: 50px;
            background-color: #4CAF50;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            font-size: 20px;
        }
        
        @keyframes bounceAndSpin {
            0%, 100% {
                transform: translateY(0) rotate(0deg);
            }
            25% {
                transform: translateY(-10px) rotate(20deg);
            }
            50% {
                transform: translateY(0) rotate(0deg);
            }
            75% {
                transform: translateY(-5px) rotate(-20deg);
            }
        }
        
        .status-toggle {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            width: 60px;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        
        .toggle-active {
            background-color: rgba(76, 175, 80, 0.2);
            border: 1px solid #4CAF50;
            color: #4CAF50;
        }
        
        .toggle-inactive {
            background-color: rgba(255, 152, 0, 0.2);
            border: 1px solid #FF9800;
            color: #FF9800;
        }
        
        .toggle-now-label {
            position: absolute;
            top: -7px;
            right: -7px;
            background-color: #F44336;
            color: white;
            border-radius: 3px;
            padding: 1px 3px;
            font-size: 8px;
            font-weight: bold;
            transform: rotate(20deg);
        }
        
        .feature-visual img {
            max-width: 100%;
            border-radius: 4px;
        }
        
        .button-example {
            display: inline-block;
            padding: 8px 15px;
            margin: 5px;
            background-color: #4CAF50;
            color: white;
            border-radius: 4px;
            font-size: 14px;
            font-weight: bold;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .button-example.primary {
            background-color: #2196F3;
        }
        
        .button-example.success {
            background-color: #4CAF50;
        }
        
        .button-example.danger {
            background-color: #F44336;
        }
        
        .button-example.info {
            background-color: rgb(68, 155, 255);
        }
        
        .ui-example {
            display: flex;
            align-items: center;
            margin: 8px 0;
            font-size: 14px;
        }
        
        .ui-example .material-symbols-rounded {
            margin-right: 8px;
        }
        
        .feature-section-icon {
            display: inline-block;
            margin-right: 5px;
            vertical-align: middle;
        }
    </style>
    <script>
        // Ensure page starts at the top
        window.onbeforeunload = function() {
            window.scrollTo(0, 0);
        };
    </script>
</head>
<body>
    <!-- Add audio elements -->
    <audio id="introAudio" preload="auto">
        <source src="picklepairsMain.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>
    <audio id="leaderboardAudio" preload="auto">
        <source src="picklepairsLeaderBoard.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <div id="intro-animation" class="intro-container">
        <div class="intro-content">
            <div class="logo-flip-container">
                <div class="logo-flipper">
                    <div class="logo-front">
                        <img src="Picklepairs.png" alt="Pickle Pairs Logo" class="intro-logo">
                    </div>
                    <div class="logo-back">
                        <img src="simplelogot.png" alt="Simple Logo" class="intro-logo back-logo">
                    </div>
                </div>
            </div>
            <h1>Pickle Pairs</h1>
            <p class="slogan">Doing Doubles Right</p>
            
            <!-- Info text container -->
            <div class="intro-info-container">
                <img src="simplelogot.png" alt="Pickle Pairs Logo" class="intro-info-logo">
                <p class="intro-info-text">Pickle Pairs is a Pickleball matchmaking app providing unique pairings every round.</p>
            </div>
            
            <div id="startButton" class="start-button">
                <span class="pickle-icon">ü•í</span>
                <span>Let's Pickle!</span>
            </div>
            <div class="intro-copyright">
            &copy; 2025 Harrison Engle | Pickle Pairs
            </div>
        </div>
    </div>

    <div class="container">
        <div class="header-logo">
            <div class="logo-flip-container header-logo-flip">
                <div class="logo-flipper">
                    <div class="logo-front">
                        <img src="Picklepairs.png" alt="Pickle Pairs Logo" id="header-logo">
                    </div>
                    <div class="logo-back">
                        <img src="simplelogot.png" alt="Simple Logo" id="header-logo-back" class="back-logo">
                    </div>
                </div>
            </div>
            <h1 id="title">Pickle Pairs</h1>
            <p class="subtitle">Doing Doubles Right</p>
        </div>

        <!-- Player Input Section -->
        <section class="navigation">
            <textarea id="playerInput" placeholder="Enter player names separated by commas or line breaks..."></textarea>
            <div id="playerCount">Player Count: 0</div>
            <div class="navigation-controls">
                <!-- First row - Most important buttons first -->
                <button id="startTournament" class="btn-success">
                    <span class="material-symbols-rounded">sports_tennis</span>
                    START TOURNAMENT
                </button>
                <button id="showPodiumBtn" class="btn-primary">
                    <span class="material-symbols-rounded">leaderboard</span>
                    LEADERBOARD
                </button>
                <button id="addPlayersBtn">
                    <span class="material-symbols-rounded">group_add</span>
                    ADD PLAYERS
                </button>
                <div class="court-select-container">
                    <label for="courtSelect">Courts:</label>
                    <select id="courtSelect">
                        <option value="1">1 Court</option>
                        <option value="2">2 Courts</option>
                        <option value="3">3 Courts</option>
                        <option value="4">4 Courts</option>
                        <option value="5">5 Courts</option>
                        <option value="6">6 Courts</option>
                    </select>
                </div>
                <!-- Second row - Secondary actions -->
                <button id="matchesPlayed">
                    <span class="material-symbols-rounded">history</span>
                    MATCH HISTORY
                </button>
                <button id="captureAllBtn" class="capture-all-btn">
                    <div class="photo-icon-container">
                        <span class="material-symbols-rounded">photo_library</span>
                        <span class="material-symbols-rounded camera-icon">photo_camera</span>
                    </div>
                    CAPTURE ALL
                </button>
            </div>
            
            <!-- Guide Arrow -->
            <div id="guideArrow" class="guide-arrow">
                <div class="guide-arrow-content">
                    <span class="guide-pickle">ü•í</span>
                    <span class="guide-arrow-point material-symbols-rounded">arrow_downward</span>
                </div>
                <p class="guide-text">Start here!</p>
            </div>
            
            <!-- Import/Export Controls, separated from main navigation -->
            <div class="import-export-controls">
                <button id="exportBtn">
                    <span class="material-symbols-rounded">download</span>
                    EXPORT DATA
                </button>
                <label for="importFile" class="file-input-label">
                    <span class="material-symbols-rounded">upload</span>
                    IMPORT DATA
                    <input type="file" id="importFile" class="hidden" accept=".json">
                </label>
                <button id="clearBtn" class="btn-danger">
                    <span class="material-symbols-rounded">delete</span>
                    CLEAR DATA
                </button>
            </div>
        </section>

        <!-- Round Setup Section -->
        <div class="round-setup">
            <!-- Dynamically populated by JS -->
        </div>

        <!-- Floating Player List Panel -->
        <div id="playerListContainer" class="floating-panel">
            <h2>Players</h2>
            <div id="playerListContainerTable">
                <table id="playerTable">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="playerList"></tbody>
                </table>
            </div>
        </div>
        <button id="togglePlayerList" class="toggle-btn" aria-label="Toggle player list">
            <span class="material-symbols-rounded">people</span>
        </button>

        <!-- Floating Leaderboard Button -->
        <button id="floatingLeaderboardBtn" class="toggle-btn leaderboard-btn" aria-label="Show leaderboard">
            <span class="material-symbols-rounded">emoji_events</span>
        </button>

        <!-- Current Round Button -->
        <button id="scrollToCurrentRound" class="round-nav-btn" aria-label="Scroll to current round">
            <span class="material-symbols-rounded">arrow_downward</span>
            <span class="btn-text">Current Round</span>
        </button>

        <!-- Match Display Section -->
        <div id="matchDisplay" class="match-display"></div>

        <!-- Footer with extra space for proper scrolling -->
        <footer class="site-footer">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>About Pickle Pairs</h3>
                    <p>Pickle Pairs is designed to help organize and track pickleball matches dynamically, avoiding repeat pairs and unique matches until all matches are exhausted. It also keeps track of player stats, has match history, a leaderboard, and ensures fair play.</p>
                
                </div>
                <div class="footer-section">
                    <h3>Coming Soon</h3>
                    <ul>
                        <li>Bug Reports</li>
                        <li>Feature Requests</li>
                        <li>Contact / Support</li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Contact & Support</h3>
                    
    <iframe
    id="JotFormIFrame-250965783330462"
    title="Pickle Pairs - Bug Tracker and Recommendations"
    onload="window.parent.scrollTo(0,0)"
    allowtransparency="true"
    allow="geolocation; microphone; camera; fullscreen"
    src="https://form.jotform.com/250965783330462"
    frameborder="0"
    style="min-width:100%;max-width:100%;height:539px;border:none;"
    scrolling="no"
  >
  </iframe>
  <script src='https://cdn.jotfor.ms/s/umd/latest/for-form-embed-handler.js'></script>
  <script>window.jotformEmbedHandler("iframe[id='JotFormIFrame-250965783330462']", "https://form.jotform.com/")</script>
  
                    <p>For bugs, check the Debug Log (Gear icon) and copy it to your clipboard using the copy button, and paste it in the debug log section on the Bug Tracker Form.</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Pickle Pairs - Harrison Engle - All rights reserved.</p>
            </div>
        </footer>

        <!-- Podium Display Section -->
        <div id="podiumDisplay" class="podium-container">
            <h2>Pickle Board</h2>
            <div id="dateDisplay"></div>
            
            <button id="saveAsPictureBtn" class="save-picture-btn">
                <span class="material-symbols-rounded">photo_camera</span> <span>Save as Image</span>
            </button>
            <button id="toggleLeaderboardMute" class="toggle-mute-btn">
                <span class="material-symbols-rounded">volume_up</span>
            </button>
            <button id="closePodiumBtn">
                <span class="material-symbols-rounded">close</span>
            </button>

            <!-- Sorting Buttons -->
            <div class="sorting-buttons">
                <button id="sortVictoryPoints">Victory Points</button>
                <button id="sortPicklePoints">Pickle Points</button>
                <button id="sortWinPercentage">Win %</button>
                <button id="sortPicklePointAvg">Pickle Points Avg</button>
                <button id="sortPickleDifferential">Pickle Differential</button>
            </div>

            <!-- Podium Standings -->
            <div class="podium">
                <div class="podium-place silver">
                    <div class="placementtitle">ü•à</div>
                    <div class="player-name" id="silver"></div>
                </div>
                <div class="podium-place gold">
                    <div class="confetti-container">
                        <div class="confetti"></div>
                        <div class="confetti"></div>
                        <div class="confetti"></div>
                        <div class="confetti"></div>
                        <div class="confetti"></div>
                    </div>
                    <div class="placementtitle">ü•á</div>
                    <div class="player-name" id="gold"></div>
                </div>
                <div class="podium-place bronze">
                    <div class="placementtitle">ü•â</div>
                    <div class="player-name" id="bronze"></div>
                </div>
            </div>

            <!-- Player Stats Table -->
            <table id="playerStatsTable">
                <thead>
                    <tr>
                        <th>Rank</th>
                        <th>Name</th>
                        <th>Games</th>
                        <th>Victory Pts</th>
                        <th>Win %</th>
                        <th>Pickle Pts</th>
                        <th>Differential</th>
                        <th>Pt Avg</th>
                        <th>Teammates</th>
                        <th>Versus</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Dynamically filled by JavaScript -->
                </tbody>
            </table>
        </div>

        <!-- Match History Modal -->
        <div id="matchHistoryDisplay">
            <h2>Match History</h2>
            <button id="saveMatchHistoryAsPictureBtn" class="save-picture-btn">
                <span class="material-symbols-rounded">photo_camera</span> Save as Image
            </button>
            <div id="matchHistoryContent"></div>
            <button id="closeMatchHistoryBtn">
                <span class="material-symbols-rounded">close</span>
            </button>
        </div>

        <!-- Back to top button -->
        <button id="backToTopBtn" class="back-to-top-btn">
            <span class="material-symbols-rounded">arrow_upward</span>
        </button>
        
        <!-- Main audio mute button -->
        <button id="toggleMainAudioBtn" class="toggle-mute-btn fixed-position">
            <span class="material-symbols-rounded">volume_up</span>
        </button>
        
        <!-- Debug toggle button - rename to settings -->
        <button id="toggleDebugBtn" class="toggle-debug-btn">
            <span class="material-symbols-rounded">settings</span>
        </button>
        
        <!-- Info button for help panel -->
        <button id="toggleInfoBtn" class="toggle-info-btn">
            <span class="material-symbols-rounded">info</span>
        </button>
        
        <!-- Settings container (formerly debug area) -->
        <div id="debugAreaContainer" style="display: none;" class="settings-panel">
            <div class="settings-header">
                <h3>Settings</h3>
            </div>
            
            <div class="settings-toggles">
                <!-- Skip Intro Toggle -->
                <div class="setting-item">
                    <label for="skipIntroToggle" class="setting-label">Skip Intro Animation</label>
                    <label class="toggle-switch">
                        <input type="checkbox" id="skipIntroToggle">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                
                <!-- Mute All Sounds Toggle -->
                <div class="setting-item">
                    <label for="muteAllSoundsToggle" class="setting-label">Mute All Sounds</label>
                    <label class="toggle-switch">
                        <input type="checkbox" id="muteAllSoundsToggle">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
            </div>
            
            <div class="debug-section">
                <div class="debug-header">
                    <h4>Debug Log</h4>
                    <button id="copyDebugBtn" class="copy-debug-btn">
                        <span class="material-symbols-rounded">content_copy</span>
                    </button>
                </div>
                <textarea id="debugArea" readonly></textarea>
            </div>
        </div>

        <!-- Help/Info Panel -->
        <div id="helpPanel" class="help-panel">
            <div class="help-header">
                <div class="help-header-title">
                    <img src="Picklepairs.png" alt="Pickle Pairs Logo" class="help-logo">
                    <h2>Pickle Pairs Guide</h2>
                </div>
                <button id="closeHelpBtn" class="help-close-btn">
                    <span class="material-symbols-rounded">close</span>
                </button>
            </div>
            
            <!-- Dancing pickle guide -->
            <div class="dancing-pickle-guide" id="dancingPickleGuide" title="Jump to Pro Tips">üí°ü•í</div>
            
            <div class="help-section">
                <h3><span class="feature-section-icon">ü•í</span>Welcome to the Pickle Party! ü•í</h3>
                <p>Pickle Pairs is your go-to app for organizing <span class="pickle-highlight">dill-ightful</span> pickleball matches! Whether you're running a casual neighborhood round-robin or a competitive tournament, we've got you covered with our <span class="pickle-highlight">court-smart</span> matchmaking system.</p>
                <p>No more "kitchen" violations when it comes to pairing players - we ensure everyone gets a fair chance to play with and against different partners throughout your event!</p>
            </div>
            
            <div class="help-section">
                <h3><span class="feature-section-icon">ü•í</span>Getting Started</h3>
                <div class="help-feature">
                    <h4><span class="material-symbols-rounded" style="font-size: 18px; vertical-align: middle; color: #4CAF50; margin-right: 5px;">edit_note</span>Add Your Picklers</h4>
                    <p>Enter player names in the text area at the top, separated by commas or line breaks. Our player counter will keep track of how many picklers you've added.</p>
                    <div class="feature-visual">
                        <div class="ui-example">
                            <span class="material-symbols-rounded">edit_note</span>
                            <div>
                                <textarea disabled style="width: 90%; height: 40px; padding: 5px; font-size: 12px;">John, Mary, Steve, Jessica, David</textarea>
                                <div style="margin-top: 5px;"><strong>Player Count: 5</strong></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="help-feature">
                    <h4><span class="material-symbols-rounded" style="font-size: 18px; vertical-align: middle; color: #4CAF50; margin-right: 5px;">grid_view</span>Set Court Count</h4>
                    <p>Select how many courts you have available using the dropdown menu. This helps us optimize match scheduling.</p>
                    <div class="feature-visual">
                        <div class="ui-example">
                            <div style="display: inline-block; padding: 5px; border: 1px solid #ccc; border-radius: 4px; background: white;">
                                <span style="margin-right: 10px;">Courts:</span>
                                <select disabled style="padding: 3px;">
                                    <option>3 Courts</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="help-feature">
                    <h4><span class="material-symbols-rounded" style="font-size: 18px; vertical-align: middle; color: #4CAF50; margin-right: 5px;">sports_tennis</span>Start Your Tournament</h4>
                    <p>Click the green "START TOURNAMENT" button to generate your first round of perfectly balanced matches!</p>
                    <div class="feature-visual">
                        <div class="button-example success">
                            <span class="material-symbols-rounded" style="font-size: 16px; vertical-align: middle; margin-right: 5px;">sports_tennis</span>
                            START TOURNAMENT
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="help-section">
                <h3><span class="feature-section-icon">üèÜ</span>Key Features</h3>
                <div class="help-feature">
                    <h4><span class="material-symbols-rounded" style="font-size: 18px; vertical-align: middle; color: #4CAF50; margin-right: 5px;">diversity_3</span>Smart Matchmaking</h4>
                    <p>Our algorithm ensures players get unique partners each round and face new opponents until all combinations are exhausted - giving everyone a <span class="pickle-highlight">fair dink</span> at playing with everyone else!</p>
                    <p>The algorithm also intelligently handles <span class="pickle-highlight">late arrivals</span> and players who need to step out temporarily, automatically adjusting pairings to maintain balance.</p>
                    <div class="feature-visual">
                        <div style="width: 100%; text-align: center; padding: 5px; font-size: 13px;">
                            <div style="font-weight: bold; margin-bottom: 8px; border-bottom: 1px solid #ccc; padding-bottom: 5px;">Round 1</div>
                            <div style="display: flex; justify-content: space-around; margin-bottom: 5px;">
                                <div>Court 1: <strong>John & Mary</strong> vs <strong>Steve & Jessica</strong></div>
                            </div>
                            <div style="font-size: 12px; color: #666; margin-top: 10px;">Player David sits out this round</div>
                        </div>
                    </div>
                </div>
                <div class="help-feature">
                    <h4><span class="material-symbols-rounded" style="font-size: 18px; vertical-align: middle; color: #4CAF50; margin-right: 5px;">scoreboard</span>Match Scoring</h4>
                    <p>Enter scores after each match to track performance. Winners record their "Pickle Points" (the points they scored), and we'll handle the rest!</p>
                    <div class="feature-visual">
                        <div style="width: 100%; padding: 5px;">
                            <div style="margin-bottom: 10px; font-weight: bold; color: #4CAF50; text-align: center; display: flex; align-items: center; justify-content: center;">
                                <span class="material-symbols-rounded" style="margin-right: 5px;">emoji_events</span>
                                WINNERS
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; background-color: rgba(76, 175, 80, 0.15); padding: 8px; border-radius: 4px; border-left: 4px solid #4CAF50;">
                                <div style="font-weight: bold;">John & Mary</div>
                                <input type="text" value="11" disabled style="width: 40px; text-align: center; border: 2px solid #4CAF50; border-radius: 4px; padding: 3px; background-color: white;">
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px;">
                                <div>Steve & Jessica</div>
                                <input type="text" disabled value="5" style="width: 40px; text-align: center; border: 1px solid #ccc; border-radius: 4px; padding: 3px;">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="help-feature">
                    <h4><span class="material-symbols-rounded" style="font-size: 18px; vertical-align: middle; color: #4CAF50; margin-right: 5px;">edit</span>Editing Match Results</h4>
                    <p>Made a scoring mistake and in a <span class="pickle-highlight">pickle</span>? No worries! You can easily edit match results after they're completed.</p>
                    <div class="feature-visual">
                        <div style="width: 100%; padding: 5px;">
                            <div style="display: flex; flex-direction: column; gap: 10px;">
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <span class="material-symbols-rounded" style="color: #FF9800;">edit</span>
                                    <div style="font-size: 13px;">Simply click on any completed match score to edit it</div>
                                </div>
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <span class="material-symbols-rounded" style="color: #4CAF50;">check_circle</span>
                                    <div style="font-size: 13px;">The leaderboard and stats update automatically</div>
                                </div>
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <span class="material-symbols-rounded" style="color: #F44336;">warning</span>
                                    <div style="font-size: 13px;">Can't find a match to edit? Check the Match History</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="help-feature">
                    <h4><span class="material-symbols-rounded" style="font-size: 18px; vertical-align: middle; color: #4CAF50; margin-right: 5px;">leaderboard</span>Leaderboard</h4>
                    <p>Track player progress with our dynamic leaderboard - complete with cool sound effects and animations that would make any pickleball paddle proud!</p>
                    <div class="feature-visual">
                        <div style="width: 100%; display: flex; justify-content: space-around;">
                            <div class="button-example primary">
                                <span class="material-symbols-rounded" style="font-size: 16px; vertical-align: middle; margin-right: 5px;">leaderboard</span>
                                LEADERBOARD
                            </div>
                            <div class="button-example" style="background-color: #FF9800;">
                                <span class="material-symbols-rounded" style="font-size: 16px; vertical-align: middle; margin-right: 5px;">emoji_events</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="help-feature">
                    <h4><span class="material-symbols-rounded" style="font-size: 18px; vertical-align: middle; color: #4CAF50; margin-right: 5px;">history</span>Match History</h4>
                    <p>Review all completed matches in chronological order - perfect for settling those "but I'm sure we won!" debates.</p>
                    <div class="feature-visual">
                        <div class="button-example">
                            <span class="material-symbols-rounded" style="font-size: 16px; vertical-align: middle; margin-right: 5px;">history</span>
                            MATCH HISTORY
                        </div>
                    </div>
                </div>
                <div class="help-feature">
                    <h4><span class="material-symbols-rounded" style="font-size: 18px; vertical-align: middle; color: #4CAF50; margin-right: 5px;">people</span>Player Management</h4>
                    <p>Use the floating player list to track who's playing and who's sitting out. You can manually toggle players to "Active" or "Sitting Out" for a round if they need a break or have to leave early. Perfect for managing those <span class="pickle-highlight">pickle fatigue</span> moments!</p>
                    <div class="feature-visual">
                        <div style="width: 100%; max-width: 360px; margin: 0 auto; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                            <!-- Header -->
                            <div style="background-color: #2196F3; color: white; padding: 10px; text-align: center; font-weight: bold;">
                                Players
                            </div>
                            <!-- Player table header -->
                            <div style="display: flex; background-color: #2196F3; color: white; padding: 8px 10px;">
                                <div style="flex: 1; font-weight: bold; font-size: 14px;">NAME</div>
                                <div style="flex: 2; font-weight: bold; font-size: 14px;">STATUS</div>
                            </div>
                            <!-- Player a -->
                            <div style="display: flex; align-items: center; padding: 8px 10px; background-color: white; border-bottom: 1px solid #eee;">
                                <div style="flex: 1; font-size: 16px; font-weight: 700; color: #1565C0;">a</div>
                                <div style="flex: 2; display: flex; justify-content: space-between; align-items: center; gap: 8px;">
                                    <div style="display: flex; align-items: center; gap: 8px;">
                                        <div style="position: relative; display: inline-block; width: 40px; height: 22px; margin-right: 8px;">
                                            <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(66, 184, 131, 0.3); border-radius: 34px;"></div>
                                            <div style="position: absolute; height: 18px; width: 18px; left: 22px; bottom: 2px; background-color: white; border-radius: 50%;"></div>
                                        </div>
                                        <span style="background-color: rgba(66, 184, 131, 0.2); color: #2E7D32; padding: 2px 6px; border-radius: 3px; font-size: 10px; font-weight: 600; text-transform: uppercase;">Active</span>
                                    </div>
                                    <div style="display: flex; gap: 5px;">
                                        <button style="background-color: #2196F3; color: white; border: none; border-radius: 3px; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center;">
                                            <span class="material-symbols-rounded" style="font-size: 16px;">edit</span>
                                        </button>
                                        <button style="background-color: #FF6B6B; color: white; border: none; border-radius: 3px; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center;">
                                            <span class="material-symbols-rounded" style="font-size: 16px;">delete</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <!-- Player b -->
                            <div style="display: flex; align-items: center; padding: 8px 10px; background-color: #f5f5f5; border-bottom: 1px solid #eee;">
                                <div style="flex: 1; font-size: 16px; font-weight: 700; color: #1565C0;">b</div>
                                <div style="flex: 2; display: flex; justify-content: space-between; align-items: center; gap: 8px;">
                                    <div style="display: flex; align-items: center; gap: 8px;">
                                        <div style="position: relative; display: inline-block; width: 40px; height: 22px; margin-right: 8px;">
                                            <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(255, 107, 107, 0.3); border-radius: 34px;"></div>
                                            <div style="position: absolute; height: 18px; width: 18px; left: 2px; bottom: 2px; background-color: white; border-radius: 50%;"></div>
                                        </div>
                                        <span style="background-color: rgba(255, 107, 107, 0.2); color: #D32F2F; padding: 2px 6px; border-radius: 3px; font-size: 10px; font-weight: 600; text-transform: uppercase;">Sitting Out</span>
                                    </div>
                                    <div style="display: flex; gap: 5px;">
                                        <button style="background-color: #2196F3; color: white; border: none; border-radius: 3px; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center;">
                                            <span class="material-symbols-rounded" style="font-size: 16px;">edit</span>
                                        </button>
                                        <button style="background-color: #FF6B6B; color: white; border: none; border-radius: 3px; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center;">
                                            <span class="material-symbols-rounded" style="font-size: 16px;">delete</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <!-- Player c -->
                            <div style="display: flex; align-items: center; padding: 8px 10px; background-color: white; border-bottom: 1px solid #eee;">
                                <div style="flex: 1; font-size: 16px; font-weight: 700; color: #1565C0;">c</div>
                                <div style="flex: 2; display: flex; justify-content: space-between; align-items: center; gap: 8px;">
                                    <div style="display: flex; align-items: center; gap: 8px;">
                                        <div style="position: relative; display: inline-block; width: 40px; height: 22px; margin-right: 8px;">
                                            <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(66, 184, 131, 0.3); border-radius: 34px;"></div>
                                            <div style="position: absolute; height: 18px; width: 18px; left: 22px; bottom: 2px; background-color: white; border-radius: 50%;"></div>
                                        </div>
                                        <span style="background-color: rgba(66, 184, 131, 0.2); color: #2E7D32; padding: 2px 6px; border-radius: 3px; font-size: 10px; font-weight: 600; text-transform: uppercase;">Active</span>
                                    </div>
                                    <div style="display: flex; gap: 5px;">
                                        <button style="background-color: #2196F3; color: white; border: none; border-radius: 3px; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center;">
                                            <span class="material-symbols-rounded" style="font-size: 16px;">edit</span>
                                        </button>
                                        <button style="background-color: #FF6B6B; color: white; border: none; border-radius: 3px; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center;">
                                            <span class="material-symbols-rounded" style="font-size: 16px;">delete</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="help-feature">
                    <h4><span class="material-symbols-rounded" style="font-size: 18px; vertical-align: middle; color: #4CAF50; margin-right: 5px;">save</span>Import/Export Data</h4>
                    <p>Save your tournament data to continue later or transfer to another device. Not even a <span class="pickle-highlight">kitchen fault</span> can erase your progress!</p>
                    <div class="feature-visual">
                        <div style="display: flex; gap: 10px; justify-content: center;">
                            <div class="button-example">
                                <span class="material-symbols-rounded" style="font-size: 16px; vertical-align: middle; margin-right: 5px;">download</span>
                                EXPORT DATA
                            </div>
                            <div class="button-example">
                                <span class="material-symbols-rounded" style="font-size: 16px; vertical-align: middle; margin-right: 5px;">upload</span>
                                IMPORT DATA
                            </div>
                        </div>
                    </div>
                </div>
                <div class="help-feature">
                    <h4><span class="material-symbols-rounded" style="font-size: 18px; vertical-align: middle; color: #4CAF50; margin-right: 5px;">photo_camera</span>Capture Images</h4>
                    <p>Take snapshots of your leaderboard and match history to share with the group or for posterity. Pictures or it didn't happen, right?</p>
                    <div class="feature-visual">
                        <div class="button-example">
                            <span class="material-symbols-rounded" style="font-size: 16px; vertical-align: middle; margin-right: 5px;">photo_camera</span>
                            CAPTURE ALL
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="help-section">
                <h3><span class="feature-section-icon">üìä</span>Leaderboard Rankings Explained</h3>
                <p>Our leaderboard tracks multiple metrics to give a comprehensive view of player performance. Swipe through each ranking mode to understand how they work:</p>
                
                <div class="ranking-carousel">
                    <div class="ranking-slide active" id="slide-0">
                        <h4 class="ranking-title"><span class="material-symbols-rounded" style="font-size: 18px; vertical-align: middle; color: #FFD700; margin-right: 5px;">emoji_events</span>Victory Points <span class="pickle-highlight">(Default)</span></h4>
                        <div class="ranking-description">
                            <p>The primary ranking method in Pickle Pairs.</p>
                            <ul>
                                <li>1 point awarded to each player on the winning team</li>
                                <li>Players with most Victory Points rank highest</li>
                                <li>Ties are broken by: Win %, then Pickle Points, then Differential, then Average</li>
                            </ul>
                            <p><strong>Best for:</strong> Fair overall rankings that reward consistent winning.</p>
                            <div class="feature-visual">
                                <div style="font-size: 13px; width: 100%;">
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px; font-weight: bold; border-bottom: 1px solid #ccc; padding-bottom: 3px;">
                                        <span>Name</span>
                                        <span>Victory Pts</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 3px;">
                                        <span>1. Mary</span>
                                        <span>5</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 3px;">
                                        <span>2. John</span>
                                        <span>4</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between;">
                                        <span>3. Steve</span>
                                        <span>3</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="ranking-slide" id="slide-1">
                        <h4 class="ranking-title"><span class="material-symbols-rounded" style="font-size: 18px; vertical-align: middle; color: #FF9800; margin-right: 5px;">scoreboard</span>Pickle Points</h4>
                        <div class="ranking-description">
                            <p>Total points scored across all games.</p>
                            <ul>
                                <li>Rewards aggressive offensive play and high scoring</li>
                                <li>Players with most total points rank highest</li>
                                <li>Ties are broken by: Victory Points, then Win %, then Differential</li>
                            </ul>
                            <p><strong>Best for:</strong> Highlighting offensive players who consistently rack up points.</p>
                            <div class="feature-visual">
                                <div style="font-size: 13px; width: 100%;">
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px; font-weight: bold; border-bottom: 1px solid #ccc; padding-bottom: 3px;">
                                        <span>Name</span>
                                        <span>Pickle Pts</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 3px;">
                                        <span>1. Steve</span>
                                        <span>42</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 3px;">
                                        <span>2. Mary</span>
                                        <span>39</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between;">
                                        <span>3. John</span>
                                        <span>35</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="ranking-slide" id="slide-2">
                        <h4 class="ranking-title"><span class="material-symbols-rounded" style="font-size: 18px; vertical-align: middle; color: #2196F3; margin-right: 5px;">percent</span>Win Percentage</h4>
                        <div class="ranking-description">
                            <p>Percentage of matches won relative to total matches played.</p>
                            <ul>
                                <li>Calculated as: (Wins √∑ Total Games) √ó 100%</li>
                                <li>Players with highest win % rank highest</li>
                                <li>Ties are broken by: Victory Points, then Pickle Points</li>
                            </ul>
                            <p><strong>Best for:</strong> Comparing players who've played different numbers of games.</p>
                            <div class="feature-visual">
                                <div style="font-size: 13px; width: 100%;">
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px; font-weight: bold; border-bottom: 1px solid #ccc; padding-bottom: 3px;">
                                        <span>Name</span>
                                        <span>Win %</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 3px;">
                                        <span>1. Mary</span>
                                        <span>83%</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 3px;">
                                        <span>2. David</span>
                                        <span>75%</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between;">
                                        <span>3. John</span>
                                        <span>67%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="ranking-slide" id="slide-3">
                        <h4 class="ranking-title"><span class="material-symbols-rounded" style="font-size: 18px; vertical-align: middle; color: #9C27B0; margin-right: 5px;">functions</span>Pickle Points Average</h4>
                        <div class="ranking-description">
                            <p>Average points scored in each game.</p>
                            <ul>
                                <li>Calculated as: Total Points √∑ Games Played</li>
                                <li>Players with highest average rank highest</li>
                                <li>Ties are broken by: Total Points, then Victory Points</li>
                            </ul>
                            <p><strong>Best for:</strong> Finding consistently high scorers regardless of win count.</p>
                            <div class="feature-visual">
                                <div style="font-size: 13px; width: 100%;">
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px; font-weight: bold; border-bottom: 1px solid #ccc; padding-bottom: 3px;">
                                        <span>Name</span>
                                        <span>Pt Avg</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 3px;">
                                        <span>1. Jessica</span>
                                        <span>8.5</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 3px;">
                                        <span>2. Steve</span>
                                        <span>8.4</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between;">
                                        <span>3. Mary</span>
                                        <span>7.8</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="ranking-slide" id="slide-4">
                        <h4 class="ranking-title"><span class="material-symbols-rounded" style="font-size: 18px; vertical-align: middle; color: #F44336; margin-right: 5px;">trending_up</span>Pickle Differential</h4>
                        <div class="ranking-description">
                            <p>The difference between points scored and points allowed.</p>
                            <ul>
                                <li>Calculated as: Total Points Scored ‚àí Total Points Allowed</li>
                                <li>Players with highest differential rank highest</li>
                                <li>Positive number = scored more than allowed</li>
                                <li>Negative number = allowed more than scored</li>
                                <li>Ties are broken by: Victory Points, then Win %</li>
                            </ul>
                            <p><strong>Best for:</strong> Balancing offensive scoring with defensive skill.</p>
                            <div class="feature-visual">
                                <div style="font-size: 13px; width: 100%;">
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px; font-weight: bold; border-bottom: 1px solid #ccc; padding-bottom: 3px;">
                                        <span>Name</span>
                                        <span>Differential</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 3px;">
                                        <span>1. Mary</span>
                                        <span>+18</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 3px;">
                                        <span>2. John</span>
                                        <span>+12</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between;">
                                        <span>3. David</span>
                                        <span>+6</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="ranking-slide" id="slide-5">
                        <h4 class="ranking-title"><span class="material-symbols-rounded" style="font-size: 18px; vertical-align: middle; color: #4CAF50; margin-right: 5px;">tune</span>Custom Sorting</h4>
                        <div class="ranking-description">
                            <p>Create your own ranking by using the sort buttons at the top of the leaderboard.</p>
                            <ul>
                                <li>Click any metric button to sort the leaderboard by that stat</li>
                                <li>Great for tournament variations or special challenges</li>
                                <li>Podium will update to reflect your custom sort</li>
                            </ul>
                            <p><strong>Best for:</strong> Adding variety to your tournament or focusing on specific skills.</p>
                            <div class="feature-visual">
                                <div style="width: 100%; padding: 5px;">
                                    <div style="font-weight: bold; margin-bottom: 8px;">Sort Buttons:</div>
                                    <div style="display: flex; flex-wrap: wrap; gap: 5px; justify-content: center;">
                                        <div class="button-example" style="font-size: 12px;">Victory Points</div>
                                        <div class="button-example" style="font-size: 12px;">Pickle Points</div>
                                        <div class="button-example" style="font-size: 12px;">Win %</div>
                                        <div class="button-example" style="font-size: 12px;">Pt Avg</div>
                                        <div class="button-example" style="font-size: 12px;">Differential</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="ranking-navigation">
                        <button class="ranking-btn prev-btn" onclick="navigateRankingSlide(-1)">
                            <span class="material-symbols-rounded">chevron_left</span>
                        </button>
                        
                        <div class="ranking-dots">
                            <span class="ranking-dot active" onclick="showRankingSlide(0)"></span>
                            <span class="ranking-dot" onclick="showRankingSlide(1)"></span>
                            <span class="ranking-dot" onclick="showRankingSlide(2)"></span>
                            <span class="ranking-dot" onclick="showRankingSlide(3)"></span>
                            <span class="ranking-dot" onclick="showRankingSlide(4)"></span>
                            <span class="ranking-dot" onclick="showRankingSlide(5)"></span>
                        </div>
                        
                        <button class="ranking-btn next-btn" onclick="navigateRankingSlide(1)">
                            <span class="material-symbols-rounded">chevron_right</span>
                        </button>
                    </div>
                </div>
                
                <p>The <span class="pickle-highlight">top three picklers</span> get the honor of standing on our virtual podium with gold, silver, and bronze medals!</p>
                <div class="feature-visual">
                    <div style="display: flex; justify-content: center; align-items: flex-end; width: 100%; padding: 10px;">
                        <div style="text-align: center; margin: 0 10px; padding: 5px 10px; background-color: #C0C0C0; height: 40px; display: flex; flex-direction: column; justify-content: flex-end; border-radius: 4px 4px 0 0;">
                            <div style="font-size: 20px;">ü•à</div>
                            <div style="font-weight: bold;">John</div>
                        </div>
                        <div style="text-align: center; margin: 0 10px; padding: 5px 10px; background-color: #FFD700; height: 60px; display: flex; flex-direction: column; justify-content: flex-end; border-radius: 4px 4px 0 0;">
                            <div style="font-size: 20px;">ü•á</div>
                            <div style="font-weight: bold;">Mary</div>
                        </div>
                        <div style="text-align: center; margin: 0 10px; padding: 5px 10px; background-color: #CD7F32; height: 30px; display: flex; flex-direction: column; justify-content: flex-end; border-radius: 4px 4px 0 0;">
                            <div style="font-size: 20px;">ü•â</div>
                            <div style="font-weight: bold;">Steve</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="help-section">
                <h3><span class="feature-section-icon">üí°</span>Pro Tips</h3>
                <div class="help-feature">
                    <h4><span class="material-symbols-rounded" style="font-size: 18px; vertical-align: middle; color: #4CAF50; margin-right: 5px;">keyboard</span>Quick Score Entry</h4>
                    <p>Use the number keypad for faster score entry - just click the score box and type the winner's points!</p>
                </div>
                <div class="help-feature">
                    <h4><span class="material-symbols-rounded" style="font-size: 18px; vertical-align: middle; color: #4CAF50; margin-right: 5px;">update</span>Real-time Adjustments</h4>
                    <p>Need to handle players arriving late or leaving early? No problem! Use the player's panel when toggling a player's status to apply changes to the next round.</p>
                </div>
                <div class="help-feature">
                    <h4><span class="material-symbols-rounded" style="font-size: 18px; vertical-align: middle; color: #4CAF50; margin-right: 5px;">navigate_next</span>Navigation Shortcuts</h4>
                    <p>Use the Arrow buttons to quickly scroll to your active matches or the top of the page.</p>
                    <div class="feature-visual">
                        <div style="display: flex; gap: 15px; align-items: center; justify-content: center;">
                            <div style="display: flex; flex-direction: column; align-items: center;">
                                <div class="button-example" style="border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; padding: 0;">
                                    <span class="material-symbols-rounded">arrow_upward</span>
                                </div>
                                <div style="font-size: 12px; margin-top: 5px;">Top</div>
                            </div>
                            <div style="display: flex; flex-direction: column; align-items: center;">
                                <div class="button-example" style="border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; padding: 0;">
                                    <span class="material-symbols-rounded">arrow_downward</span>
                                </div>
                                <div style="font-size: 12px; margin-top: 5px;">Current Round</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="help-feature">
                    <h4><span class="material-symbols-rounded" style="font-size: 18px; vertical-align: middle; color: #4CAF50; margin-right: 5px;">volume_up</span>Sound Settings</h4>
                    <p>Toggle sound effects for the intro and leaderboard using the sound icon buttons. Customize your audio preferences in the settings menu.</p>
                </div>
            </div>
            
            <div class="help-footer">
                <p>Pickle Pairs - Doing Doubles Right since 2025<br>Created with ‚ù§Ô∏è and a passion for pickleball</p>
                <img src="simplelogot.png" alt="Simple Logo" style="width: 30px; margin-top: 10px;">
            </div>
        </div>
    </div>

    <script>
        // Intro animation with audio
        document.addEventListener('DOMContentLoaded', function() {
            const introContainer = document.getElementById('intro-animation');
            const introContent = introContainer.querySelector('.intro-content');
            const startButton = document.getElementById('startButton');
            const introAudio = document.getElementById('introAudio');
            const toggleMainAudioBtn = document.getElementById('toggleMainAudioBtn');
            
            // Set default volume to 30% for both audio elements
            introAudio.volume = 0.3;
            document.getElementById('leaderboardAudio').volume = 0.3;
            
            // Setup audio state variables first
            let isMainAudioMuted = localStorage.getItem('isMainAudioMuted') === 'true';
            let isLeaderboardMuted = localStorage.getItem('isLeaderboardAudioMuted') === 'true';
            
            // Add debug logging for settings values
            console.log('Initial settings values:', {
                isMainAudioMuted,
                isLeaderboardMuted,
                skipIntro: localStorage.getItem('skipIntro') === 'true',
                muteAllSounds: localStorage.getItem('muteAllSounds') === 'true'
            });
            
            // Initialize settings toggles
            const skipIntroToggle = document.getElementById('skipIntroToggle');
            const muteAllSoundsToggle = document.getElementById('muteAllSoundsToggle');
            
            // Check localStorage for settings
            let skipIntro = localStorage.getItem('skipIntro') === 'true';
            let muteAllSounds = localStorage.getItem('muteAllSounds') === 'true';
            
            // Set initial toggle states
            skipIntroToggle.checked = skipIntro;
            muteAllSoundsToggle.checked = muteAllSounds;
            
            // Apply skip intro setting if enabled
            if (skipIntro) {
                introContainer.style.display = 'none';
                showGuideArrow();
            }
            
            // Apply mute all sounds setting if enabled
            if (muteAllSounds) {
                // Set muted state for both audio elements
                isMainAudioMuted = true;
                isLeaderboardMuted = true;
                
                // Update localStorage
                localStorage.setItem('isMainAudioMuted', 'true');
                localStorage.setItem('isLeaderboardAudioMuted', 'true');
                
                // Update UI
                toggleMainAudioBtn.querySelector('.material-symbols-rounded').textContent = 'volume_off';
                toggleMainAudioBtn.classList.add('muted');
                toggleMainAudioBtn.setAttribute('data-tooltip', 'Turned off in settings - gear icon');
                
                // Also update leaderboard mute button if it exists
                const toggleLeaderboardMute = document.getElementById('toggleLeaderboardMute');
                if (toggleLeaderboardMute) {
                    toggleLeaderboardMute.querySelector('.material-symbols-rounded').textContent = 'volume_off';
                    toggleLeaderboardMute.classList.add('muted');
                    toggleLeaderboardMute.setAttribute('data-tooltip', 'Turned off in settings - gear icon');
                }
                
                // Immediately stop any playing audio for iOS/Safari compatibility
                introAudio.pause();
                introAudio.currentTime = 0;
                
                const leaderboardAudio = document.getElementById('leaderboardAudio');
                leaderboardAudio.pause();
                leaderboardAudio.currentTime = 0;
            }
            
            // Add event listeners for settings toggles
            skipIntroToggle.addEventListener('change', function() {
                skipIntro = this.checked;
                localStorage.setItem('skipIntro', skipIntro.toString());
                
                // Log to debug area
                const debugArea = document.getElementById('debugArea');
                if (debugArea) {
                    const timestamp = new Date().toISOString();
                    debugArea.value += `${timestamp} - Skip intro setting changed to: ${skipIntro}\n`;
                    // Scroll to bottom
                    debugArea.scrollTop = debugArea.scrollHeight;
                }
                
                // Clear console log for debugging
                console.log(`Skip intro toggled to: ${skipIntro}`);
                console.log('Current localStorage value:', localStorage.getItem('skipIntro'));
            });
            
            muteAllSoundsToggle.addEventListener('change', function() {
                muteAllSounds = this.checked;
                localStorage.setItem('muteAllSounds', muteAllSounds.toString());
                
                // Clear console log for debugging
                console.log(`Mute all sounds toggled to: ${muteAllSounds}`);
                console.log('Current localStorage value:', localStorage.getItem('muteAllSounds'));
                
                // Update audio states based on this master setting
                if (muteAllSounds) {
                    // Save current states before muting everything
                    localStorage.setItem('previousMainAudioState', isMainAudioMuted.toString());
                    localStorage.setItem('previousLeaderboardAudioState', isLeaderboardMuted.toString());
                    
                    console.log('Saved previous audio states:', {
                        mainAudio: isMainAudioMuted,
                        leaderboardAudio: isLeaderboardMuted
                    });
                    
                    // Mute all audio elements
                    isMainAudioMuted = true;
                    isLeaderboardMuted = true;
                    
                    // Update localStorage
                    localStorage.setItem('isMainAudioMuted', 'true');
                    localStorage.setItem('isLeaderboardAudioMuted', 'true');
                    
                    // Update UI
                    toggleMainAudioBtn.querySelector('.material-symbols-rounded').textContent = 'volume_off';
                    toggleMainAudioBtn.classList.add('muted');
                    toggleMainAudioBtn.setAttribute('data-tooltip', 'Turned off in settings - gear icon');
                    
                    // Also update leaderboard mute button if it exists
                    const toggleLeaderboardMute = document.getElementById('toggleLeaderboardMute');
                    if (toggleLeaderboardMute) {
                        toggleLeaderboardMute.querySelector('.material-symbols-rounded').textContent = 'volume_off';
                        toggleLeaderboardMute.classList.add('muted');
                        toggleLeaderboardMute.setAttribute('data-tooltip', 'Turned off in settings - gear icon');
                    }
                    
                    // Immediately stop any playing audio for iOS/Safari compatibility
                    introAudio.pause();
                    introAudio.currentTime = 0;
                    
                    const leaderboardAudio = document.getElementById('leaderboardAudio');
                    leaderboardAudio.pause();
                    leaderboardAudio.currentTime = 0;
                } else {
                    // Restore previous audio states
                    const previousMainAudioState = localStorage.getItem('previousMainAudioState') === 'true';
                    const previousLeaderboardAudioState = localStorage.getItem('previousLeaderboardAudioState') === 'true';
                    
                    console.log('Restoring previous audio states:', {
                        mainAudio: previousMainAudioState,
                        leaderboardAudio: previousLeaderboardAudioState
                    });
                    
                    // Set audio states to previous values
                    isMainAudioMuted = previousMainAudioState;
                    isLeaderboardMuted = previousLeaderboardAudioState;
                    
                    // Update localStorage
                    localStorage.setItem('isMainAudioMuted', isMainAudioMuted.toString());
                    localStorage.setItem('isLeaderboardAudioMuted', isLeaderboardMuted.toString());
                    
                    // Update main audio UI
                    toggleMainAudioBtn.removeAttribute('data-tooltip');
                    if (isMainAudioMuted) {
                        toggleMainAudioBtn.querySelector('.material-symbols-rounded').textContent = 'volume_off';
                        toggleMainAudioBtn.classList.add('muted');
                    } else {
                        toggleMainAudioBtn.querySelector('.material-symbols-rounded').textContent = 'volume_up';
                        toggleMainAudioBtn.classList.remove('muted');
                    }
                    
                    // Update leaderboard mute UI if it exists
                    const toggleLeaderboardMute = document.getElementById('toggleLeaderboardMute');
                    if (toggleLeaderboardMute) {
                        toggleLeaderboardMute.removeAttribute('data-tooltip');
                        if (isLeaderboardMuted) {
                            toggleLeaderboardMute.querySelector('.material-symbols-rounded').textContent = 'volume_off';
                            toggleLeaderboardMute.classList.add('muted');
                        } else {
                            toggleLeaderboardMute.querySelector('.material-symbols-rounded').textContent = 'volume_up';
                            toggleLeaderboardMute.classList.remove('muted');
                        }
                    }
                }
                
                // Log to debug area
                const debugArea = document.getElementById('debugArea');
                if (debugArea) {
                    const timestamp = new Date().toISOString();
                    debugArea.value += `${timestamp} - Mute all sounds setting changed to: ${muteAllSounds}\n`;
                    // Scroll to bottom
                    debugArea.scrollTop = debugArea.scrollHeight;
                }
                
                // Show toast for user feedback
                showToast(`All sounds ${muteAllSounds ? 'muted' : 'enabled'}`, "info", 2000);
            });
            
            // Update toggle main audio button click handler to respect the global setting
            toggleMainAudioBtn.addEventListener('click', function() {
                if (muteAllSounds) {
                    // Show a toast notification
                    showToast("Sound is disabled in settings. Check the gear icon to enable.", "info", 3000);
                    return;
                }
                
                isMainAudioMuted = !isMainAudioMuted;
                localStorage.setItem('isMainAudioMuted', isMainAudioMuted.toString());
                
                // Log for debugging
                console.log(`Main audio muted toggled to: ${isMainAudioMuted}`);
                console.log('Current localStorage value:', localStorage.getItem('isMainAudioMuted'));
                
                if (isMainAudioMuted) {
                    // Change icon to muted
                    toggleMainAudioBtn.querySelector('.material-symbols-rounded').textContent = 'volume_off';
                    toggleMainAudioBtn.classList.add('muted');
                    // Immediately pause the audio for iOS/Safari compatibility
                    introAudio.pause();
                    introAudio.currentTime = 0;
                } else {
                    // Change icon to unmuted
                    toggleMainAudioBtn.querySelector('.material-symbols-rounded').textContent = 'volume_up';
                    toggleMainAudioBtn.classList.remove('muted');
                    
                    // If we're on the intro screen, play the audio
                    if (introContainer && !introContainer.classList.contains('animate-out') && introContainer.style.display !== 'none') {
                        safePlayAudio(introAudio);
                    }
                }
            });
            
            // Setup logo flip click behavior
            const logoFlipContainers = document.querySelectorAll('.logo-flip-container');
            logoFlipContainers.forEach(container => {
                // We'll keep a simpler implementation that works well with CSS hover
                container.addEventListener('click', function(e) {
                    // This is primarily for mobile devices
                    // Desktop will use CSS :hover state
                });
            });
            
            // Update toggle button icon based on mute state
            if (isMainAudioMuted) {
                toggleMainAudioBtn.querySelector('.material-symbols-rounded').textContent = 'volume_off';
                toggleMainAudioBtn.classList.add('muted');
            } else {
                toggleMainAudioBtn.querySelector('.material-symbols-rounded').textContent = 'volume_up';
                toggleMainAudioBtn.classList.remove('muted');
            }
            
            // Start the intro animation immediately on page load
            // This will animate in the logo, title, slogan, and button
            setTimeout(function() {
                introContent.classList.add('animate-in');
            }, 100);
            
            // Add click event to start button to begin the transition to the main app
            startButton.addEventListener('click', function() {
                // Add the clicked class to trigger the button animation
                startButton.classList.add('clicked');
                
                // Start the audio only if not muted
                if (!isMainAudioMuted) {
                    // Volume is already set to 0.3 (30%) on initialization
                    safePlayAudio(introAudio);
                    
                    // Start fading audio after 7 seconds
                    setTimeout(() => {
                        // Gradually fade out audio over 3 seconds
                        fadeOutIntroAudio();
                    }, 7000);
                }
                
                // Trigger animation out after a short delay to allow button animation to complete
                setTimeout(function() {
                    introContainer.classList.add('animate-out');
                    
                    // Remove the intro container from DOM after animation completes
                    setTimeout(function() {
                        introContainer.style.display = 'none';
                        
                        // Show guide arrow after intro animation completes
                        showGuideArrow();
                    }, 1000); // Should match the CSS transition duration
                }, 600);
            });
            
            // Leaderboard audio functionality
            const leaderboardAudio = document.getElementById('leaderboardAudio');
            const showPodiumBtn = document.getElementById('showPodiumBtn');
            const floatingLeaderboardBtn = document.getElementById('floatingLeaderboardBtn');
            const closePodiumBtn = document.getElementById('closePodiumBtn');
            const toggleLeaderboardMute = document.getElementById('toggleLeaderboardMute');
            
            // Update toggle button icon based on mute state
            if (isLeaderboardMuted) {
                toggleLeaderboardMute.querySelector('.material-symbols-rounded').textContent = 'volume_off';
                toggleLeaderboardMute.classList.add('muted');
            } else {
                toggleLeaderboardMute.querySelector('.material-symbols-rounded').textContent = 'volume_up';
                toggleLeaderboardMute.classList.remove('muted');
            }
            
            // Function to quickly fade out intro audio
            function fadeOutIntroAudio(immediate = false) {
                if (introAudio.paused) return;
                
                const duration = immediate ? 50 : 300; // Faster fade if immediate is true
                const decrement = immediate ? 0.05 : 0.02; // Adjusted for 30% starting volume
                
                // Fade out intro audio
                const fadeInterval = setInterval(() => {
                    if (introAudio.volume > 0.05) {
                        introAudio.volume -= decrement;
                    } else {
                        clearInterval(fadeInterval);
                        introAudio.pause();
                        introAudio.currentTime = 0;
                        introAudio.volume = 0.3; // Reset to 30% volume for future use
                    }
                }, duration);
            }
            
            // Function to play audio that works around iOS/Safari limitations
            function safePlayAudio(audioElement) {
                // Only attempt to play if the audio isn't muted
                if (audioElement && !audioElement.paused) {
                    // Already playing, don't interrupt
                    return Promise.resolve();
                }
                
                // Use a user interaction promise to play audio
                const playPromise = audioElement.play();
                
                // Handle the promise to catch and log any errors
                if (playPromise !== undefined) {
                    playPromise.catch(error => {
                        console.log('Audio playback was prevented by the browser:', error);
                        // On iOS, we might need to handle this case differently
                        if (error.name === 'NotAllowedError') {
                            // Consider showing a "Tap to enable audio" message on iOS
                            console.log('Safari/iOS blocked autoplay. User interaction required.');
                        }
                    });
                }
                
                return playPromise;
            }
            
            // Function to play leaderboard audio
            function playLeaderboardAudio() {
                // First fade out intro audio if it's playing
                fadeOutIntroAudio();
                
                if (!isLeaderboardMuted) {
                    // Volume is already set to 0.3 (30%) on initialization
                    leaderboardAudio.currentTime = 0; // Reset to beginning
                    safePlayAudio(leaderboardAudio);
                }
            }
            
            // Function to stop leaderboard audio with fade out
            function stopLeaderboardAudio() {
                if (leaderboardAudio.paused) return;
                
                // For iOS/Safari compatibility, just pause immediately
                leaderboardAudio.pause();
                leaderboardAudio.currentTime = 0;
            }
            
            // Play audio when leaderboard is opened
            showPodiumBtn.addEventListener('click', playLeaderboardAudio);
            floatingLeaderboardBtn.addEventListener('click', playLeaderboardAudio);
            
            // Stop audio when leaderboard is closed
            closePodiumBtn.addEventListener('click', stopLeaderboardAudio);
            
            // Toggle mute button functionality
            toggleLeaderboardMute.addEventListener('click', function() {
                if (muteAllSounds) {
                    // Show a toast notification
                    showToast("Sound is disabled in settings. Check the gear icon to enable.", "info", 3000);
                    return;
                }
                
                isLeaderboardMuted = !isLeaderboardMuted;
                localStorage.setItem('isLeaderboardAudioMuted', isLeaderboardMuted.toString());
                
                // Log for debugging
                console.log(`Leaderboard audio muted toggled to: ${isLeaderboardMuted}`);
                console.log('Current localStorage value:', localStorage.getItem('isLeaderboardAudioMuted'));
                
                if (isLeaderboardMuted) {
                    // Change icon to muted
                    toggleLeaderboardMute.querySelector('.material-symbols-rounded').textContent = 'volume_off';
                    toggleLeaderboardMute.classList.add('muted');
                    // Immediately stop audio for iOS/Safari compatibility
                    leaderboardAudio.pause();
                    leaderboardAudio.currentTime = 0;
                } else {
                    // Change icon to unmuted
                    toggleLeaderboardMute.querySelector('.material-symbols-rounded').textContent = 'volume_up';
                    toggleLeaderboardMute.classList.remove('muted');
                    
                    // Only start playing if the podium is currently visible
                    if (document.getElementById('podiumDisplay').classList.contains('active')) {
                        safePlayAudio(leaderboardAudio);
                    }
                }
            });
            
            // Function to show toast notifications
            function showToast(message, type = 'info', duration = 3000) {
                const toastContainer = document.getElementById('toastContainer');
                
                // Create toast element
                const toast = document.createElement('div');
                toast.classList.add('toast', `toast-${type}`);
                toast.textContent = message;
                
                // Add to container
                toastContainer.appendChild(toast);
                
                // Show with animation
                setTimeout(() => toast.classList.add('show'), 10);
                
                // Remove after duration
                setTimeout(() => {
                    toast.classList.remove('show');
                    setTimeout(() => toastContainer.removeChild(toast), 300);
                }, duration);
            }
        });
        
        // Function to show the guide arrow and handle its behavior
        function showGuideArrow() {
            const guideArrow = document.getElementById('guideArrow');
            const playerInput = document.getElementById('playerInput');
            const continueTournamentBtn = document.getElementById('startTournament'); // This is the "CONTINUE TOURNAMENT" button
            
            // Check for visible data in the Round 1 section which indicates loaded data
            const hasVisibleTournament = document.querySelector('.round-container') !== null;
            
            // Also check localStorage as backup method
            let hasStoredData = false;
            try {
                const storedData = localStorage.getItem('tournamentData');
                if (storedData) {
                    const parsedData = JSON.parse(storedData);
                    hasStoredData = parsedData && parsedData.players && parsedData.players.length > 0;
                }
            } catch (e) {
                console.error("Error checking tournament data:", e);
            }
            
            // Either visible tournament or stored data means we should point to the continue button
            const hasData = hasVisibleTournament || hasStoredData;
            console.log("Guide arrow check - visible tournament:", hasVisibleTournament, "stored data:", hasStoredData);
            
            // Target element based on whether data is loaded
            const targetElement = hasData ? continueTournamentBtn : playerInput;
            const targetText = hasData ? "Continue!" : "Start here!";
            
            // Position function that will be called on resize and scroll too
            function positionArrow() {
                const elementRect = targetElement.getBoundingClientRect();
                const arrowIcon = document.querySelector('.guide-arrow-point');
                
                if (hasData) {
                    // For continue tournament button - position to left of button, centered vertically
                    guideArrow.style.top = `${elementRect.top + (elementRect.height / 2) - (guideArrow.offsetHeight / 2)}px`;
                    const leftPosition = Math.max(10, elementRect.left - guideArrow.offsetWidth - 20);
                    guideArrow.style.left = `${leftPosition}px`;
                    
                    // Change to east arrow for pointing to the continue button
                    arrowIcon.textContent = "east";
                    arrowIcon.style.animation = "point-arrow-right 1s ease-in-out infinite";
                } else {
                    // For player input textarea - position above the LEFT side of the input
                    guideArrow.style.top = `${elementRect.top - guideArrow.offsetHeight - 15}px`;
                    guideArrow.style.left = `${elementRect.left + 30}px`;
                    
                    // Use downward arrow for pointing to the text field
                    arrowIcon.textContent = "arrow_downward";
                    arrowIcon.style.animation = "point-arrow-down 1s ease-in-out infinite";
                }
                
                // Update text
                guideArrow.querySelector('.guide-text').textContent = targetText;
            }
            
            // Make the arrow visible first
            guideArrow.classList.add('visible');
            
            // Position initially after a tiny delay to ensure visibility
            setTimeout(positionArrow, 50);
            
            // Reposition on window resize and scroll
            window.addEventListener('resize', positionArrow);
            window.addEventListener('scroll', positionArrow);
            
            // Remove the arrow after 10 seconds
            setTimeout(() => {
                guideArrow.classList.remove('visible');
                // Remove event listeners
                window.removeEventListener('resize', positionArrow);
                window.removeEventListener('scroll', positionArrow);
                
                // Remove from DOM after animation
                setTimeout(() => {
                    guideArrow.remove();
                }, 500);
            }, 10000);
        }
        
        // Define the scroll to top function and make it globally accessible
        window.scrollTop = function() { 
            document.body.scrollTop = document.documentElement.scrollTop = 0; 
        }
        
        // Add event listener to the back to top button
        document.getElementById('backToTopBtn').addEventListener('click', scrollTop);
        
        // Add event listener for the debug toggle button
        document.getElementById('toggleDebugBtn').addEventListener('click', function() {
            const debugArea = document.getElementById('debugAreaContainer');
            debugArea.style.display = debugArea.style.display === 'none' ? 'block' : 'none';
        });
        
        // Add event listener for the info toggle button
        document.getElementById('toggleInfoBtn').addEventListener('click', function() {
            const helpPanel = document.getElementById('helpPanel');
            helpPanel.classList.toggle('active');
        });
        
        // Add event listener for the help panel close button
        document.getElementById('closeHelpBtn').addEventListener('click', function() {
            const helpPanel = document.getElementById('helpPanel');
            helpPanel.classList.remove('active');
        });
        
        // Add event listener for the copy debug button
        document.getElementById('copyDebugBtn').addEventListener('click', function() {
            const debugText = document.getElementById('debugArea').value;
            if (debugText) {
                navigator.clipboard.writeText(debugText)
                    .then(() => {
                        // Visual feedback that copy was successful
                        const copyBtn = document.getElementById('copyDebugBtn');
                        copyBtn.innerHTML = '<span class="material-symbols-rounded">check</span>';
                        setTimeout(() => {
                            copyBtn.innerHTML = '<span class="material-symbols-rounded">content_copy</span>';
                        }, 1500);
                    })
                    .catch(err => {
                        console.error('Failed to copy: ', err);
                        showToast('Failed to copy debug log to clipboard', 'error');
                    });
            }
        });
        
        // Ranking Carousel Navigation
        let currentSlideIndex = 0;
        const totalSlides = 6; // Total number of ranking slides
        
        // Function to show a specific slide
        function showRankingSlide(index) {
            // Handle index bounds
            if (index < 0) index = totalSlides - 1;
            if (index >= totalSlides) index = 0;
            
            // Update current index
            currentSlideIndex = index;
            
            // Hide all slides
            const slides = document.querySelectorAll('.ranking-slide');
            slides.forEach(slide => slide.classList.remove('active'));
            
            // Show the selected slide
            const selectedSlide = document.getElementById('slide-' + index);
            if (selectedSlide) selectedSlide.classList.add('active');
            
            // Update dots
            const dots = document.querySelectorAll('.ranking-dot');
            dots.forEach((dot, i) => {
                dot.classList.toggle('active', i === index);
            });
        }
        
        // Function to navigate relative to current slide
        function navigateRankingSlide(direction) {
            showRankingSlide(currentSlideIndex + direction);
        }
        
        // Enable keyboard navigation for ranking slides when help panel is open
        document.addEventListener('keydown', function(e) {
            const helpPanel = document.getElementById('helpPanel');
            if (helpPanel.classList.contains('active')) {
                if (e.key === 'ArrowLeft') {
                    navigateRankingSlide(-1);
                } else if (e.key === 'ArrowRight') {
                    navigateRankingSlide(1);
                }
            }
        });
        
        // Function to capture all content of an element as an image
        function captureElementAsImage(element, filename) {
            // Add the photo-capture-mode class to ensure all content is visible
            element.classList.add('photo-capture-mode');
            
            // Save the original styles
            const originalStyle = element.style.cssText;
            
            // Capture all content with html2canvas
            html2canvas(element, {
                scrollX: 0,
                scrollY: 0,
                windowWidth: element.scrollWidth,
                windowHeight: element.scrollHeight,
                scale: 2, // Higher resolution
                useCORS: true,
                allowTaint: true,
                backgroundColor: '#FFFFFF'
            }).then((canvas) => {
                // Remove the photo-capture-mode class and restore original styles
                element.classList.remove('photo-capture-mode');
                element.style.cssText = originalStyle;
                
                // Create download link
                const link = document.createElement('a');
                link.href = canvas.toDataURL('image/png');
                const currentDate = new Date().toISOString().slice(0, 10);
                link.download = `${filename}-${currentDate}.png`;
                link.click();
            });
        }
        
        // Add event listener for the Match History save as image button
        document.getElementById('saveMatchHistoryAsPictureBtn').addEventListener('click', function() {
            const matchHistoryDisplay = document.getElementById('matchHistoryDisplay');
            captureElementAsImage(matchHistoryDisplay, 'match-history');
        });
        
        // Add event listener for the Capture All button
        document.getElementById('captureAllBtn').addEventListener('click', function() {
            // Show both displays temporarily
            const podiumDisplay = document.getElementById('podiumDisplay');
            const matchHistoryDisplay = document.getElementById('matchHistoryDisplay');
            
            // First show the podium and capture it
            podiumDisplay.classList.add('active');
            captureElementAsImage(podiumDisplay, 'leaderboard');
            
            // Then show the match history and capture it (after a slight delay)
            setTimeout(function() {
                podiumDisplay.classList.remove('active');
                matchHistoryDisplay.classList.add('active');
                
                captureElementAsImage(matchHistoryDisplay, 'match-history');
                
                // Hide match history after another delay
                setTimeout(function() {
                    matchHistoryDisplay.classList.remove('active');
                }, 500);
            }, 1000);
        });
        
        // Dancing pickle guide functionality
        document.getElementById('dancingPickleGuide').addEventListener('click', function() {
            // Find the Pro Tips section by its heading text
            const proTipsHeading = Array.from(document.querySelectorAll('.help-section h3')).find(
                h => h.textContent.includes('Pro Tips')
            );
            
            // If found, scroll to its parent section
            if (proTipsHeading) {
                const proTipsSection = proTipsHeading.closest('.help-section');
                const helpPanel = document.getElementById('helpPanel');
                const offset = proTipsSection.offsetTop - 20;
                helpPanel.scrollTo({
                    top: offset,
                    behavior: 'smooth'
                });
                
                // Add a brief highlight animation to the Pro Tips section
                proTipsSection.style.transition = 'background-color 0.5s';
                proTipsSection.style.backgroundColor = 'rgba(76, 175, 80, 0.1)';
                setTimeout(() => {
                    proTipsSection.style.backgroundColor = 'transparent';
                    setTimeout(() => {
                        proTipsSection.style.transition = '';
                    }, 500);
                }, 1000);
            }
        });
    </script>
    
    <!-- Toast Notification Container -->
    <div id="toastContainer" class="toast-container"></div>

    <script src="script.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
</body>
</html>
