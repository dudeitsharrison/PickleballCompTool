<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pickleball Tournament Tracker</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" />
</head>
<body>
    <div class="container">
        <h1 id="title">Pickleball Tournament Tracker</h1>

        <!-- Player Input Section -->
        <div class="navigation">
            <textarea id="playerInput" placeholder="Enter player names separated by commas or line breaks..."></textarea>
            <div class="navigation-controls">
                <button id="addPlayersBtn" class="btn-primary">
                    <span class="material-symbols-rounded">person_add</span> Add Players
                </button>
                <div class="court-select-container">
                    <label for="courtSelect">Courts:</label>
                    <select id="courtSelect">
                        <option value="1">1 Court</option>
                        <option value="2">2 Courts</option>
                        <option value="3">3 Courts</option>
                        <option value="4">4 Courts</option>
                        <option value="5">5 Courts</option>
                        <option value="6">6 Courts</option>
                        <option value="7">7 Courts</option>
                        <option value="8">8 Courts</option>
                    </select>
                </div>
                <button id="generatePairsBtn" class="btn-success">
                    <span class="material-symbols-rounded">sports_tennis</span> Start Tournament
                </button>
                <button id="showPodiumElemtn" onclick="showPodium()" class="btn-primary">
                    <span class="material-symbols-rounded">emoji_events</span> Leaderboard
                </button>
                <button id="matchesPlayed" class="btn-primary">
                    <span class="material-symbols-rounded">history</span> Match History
                </button>
                <h5 id="playerCount" class="compStats"></h5>
            </div>
            <div class="import-export-controls">
                <button id="exportBtn" class="btn-primary">
                    <span class="material-symbols-rounded">download</span> Export Data
                </button>
                <label for="importFile" class="file-input-label">
                    <span class="material-symbols-rounded">upload</span> Import Data
                    <input type="file" id="importFile" class="hidden" />
                </label>
                <button id="clearOldComp" onclick="clearState()" class="btn-danger">
                    <span class="material-symbols-rounded">delete</span> Clear Data
                </button>
            </div>
        </div>

        <!-- Round Setup Section -->
        <div class="round-setup">
            <!-- Dynamically populated by JS -->
        </div>

        <!-- Floating Player List Panel -->
        <div id="playerListContainer" class="floating-panel">
            <h2>Players</h2>
            <div id="playerListContainerTable">
                <table id="playerTable">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="playerList"></tbody>
                </table>
            </div>
        </div>
        <button id="togglePlayerList" class="toggle-btn" aria-label="Toggle player list">
            <span class="material-symbols-rounded">people</span>
        </button>

        <!-- Floating Leaderboard Button -->
        <button id="toggleLeaderboard" class="toggle-btn leaderboard-btn" aria-label="Show leaderboard">
            <span class="material-symbols-rounded">emoji_events</span>
        </button>

        <!-- Current Round Button -->
        <button id="scrollToCurrentRound" class="round-nav-btn" aria-label="Scroll to current round">
            <span class="material-symbols-rounded">arrow_downward</span>
            <span class="btn-text">Current Round</span>
        </button>

        <!-- Match Display Section -->
        <div id="matchDisplay" class="match-display"></div>

        <!-- Podium Display Section -->
        <div id="podiumDisplay" class="podium-container">
            <h2>Tournament Leaderboard</h2>
            <div id="dateDisplay"></div>
            
            <button id="saveAsPictureBtn" class="save-picture-btn">
                <span class="material-symbols-rounded">photo_camera</span> Save as Image
            </button>
            <button id="editPlayerStatsBtn" onclick="enablePlayerStatsEditing()">
                <span class="material-symbols-rounded">edit</span> Edit Player Stats
            </button>
            <button id="closePodiumBtn">
                <span class="material-symbols-rounded">close</span>
            </button>

            <!-- Sorting Buttons -->
            <div class="sorting-buttons">
                <button id="sortVictoryPoints">Victory Points</button>
                <button id="sortPicklePoints">Pickle Points</button>
                <button id="sortWinPercentage">Win %</button>
                <button id="sortPicklePointAvg">Pickle Points Avg</button>
                <button id="sortPickleDifferential">Pickle Differential</button>
            </div>

            <!-- Podium Standings -->
            <div class="podium">
                <div class="podium-place silver">
                    <div class="placementtitle">ðŸ¥ˆ</div>
                    <div class="player-name" id="silver"></div>
                </div>
                <div class="podium-place gold">
                    <div class="placementtitle">ðŸ¥‡</div>
                    <div class="player-name" id="gold"></div>
                </div>
                <div class="podium-place bronze">
                    <div class="placementtitle">ðŸ¥‰</div>
                    <div class="player-name" id="bronze"></div>
                </div>
            </div>

            <!-- Player Stats Table -->
            <table id="playerStatsTable">
                <thead>
                    <tr>
                        <th>Rank</th>
                        <th>Name</th>
                        <th>Games</th>
                        <th>Victory Pts</th>
                        <th>Win %</th>
                        <th>Pickle Pts</th>
                        <th>Differential</th>
                        <th>Pt Avg</th>
                        <th>Teammates</th>
                        <th>Versus</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Dynamically filled by JavaScript -->
                </tbody>
            </table>
        </div>

        <!-- Match History Modal -->
        <div id="matchHistoryDisplay">
            <h2>Match History</h2>
            <div id="matchHistoryContent"></div>
            <button id="closeMatchHistoryBtn">
                <span class="material-symbols-rounded">close</span>
            </button>
        </div>

        <!-- Back to top button -->
        <button id="backToTopBtn" onclick="scrollTop()" class="back-to-top-btn">
            <span class="material-symbols-rounded">arrow_upward</span>
        </button>
    </div>

    <script>
        function scrollTop() { 
            document.body.scrollTop = document.documentElement.scrollTop = 0; 
        }
        
        // Use the handleScroll function defined in script.js
        window.onscroll = handleScroll;
    </script>
    <script src="script.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
</body>
</html>
